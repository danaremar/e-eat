"use strict";var WPFormsElementor=window.WPFormsElementor||function(i,l){var s={},a={init:function(){a.events()},events:function(){l(i).on("elementor/frontend/init",function(e,t,n){elementor.channels.editor.on("elementorWPFormsAddFormBtnClick",a.addFormBtnClick),elementorFrontend.hooks.addAction("frontend/element_ready/wpforms.default",a.widgetPreviewEvents),elementor.hooks.addAction("panel/open_editor/widget/wpforms",a.widgetPanelOpen)})},widgetPreviewEvents:function(e){e.on("click",".wpforms-btn",a.addFormBtnClick).on("click",".wpforms-admin-no-forms-container a",a.clickLinkInPreview).on("change",".wpforms-elementor-form-selector select",a.selectFormInPreview).on("click mousedown focus keydown submit",".wpforms-container *",a.disableEvents),a.updateSameForms(e)},updateSameForms:function(e){var t=e.data("id"),n=e.find(".wpforms-container"),o=n.html(),r=n.attr("id");e.closest(".elementor-inner").find(".elementor-widget-wpforms:not(.elementor-element-"+t+")").each(function(){var e=l(this).find(".wpforms-container");e.attr("id")===r&&e.html(o)})},widgetPanelOpen:function(e,t){s.widgetId=t.attributes.id,s.formId=t.attributes.settings.attributes.form_id,a.widgetPanelInit(e),a.widgetPanelObserver.init(e)},widgetPanelInit:function(e){var t=e.$el.find(".elementor-control.elementor-control-form_id"),n=t.find("select"),o=e.$el.find(".elementor-control.elementor-control-add_form_notice"),r=e.$el.find(".elementor-control.elementor-control-test_form_notice");s.formSelectOptions&&n.html(s.formSelectOptions),s.formId&&""!==s.formId&&n.val(s.formId),0<n.find("option").length?o.hide():(t.hide(),r.hide()),0<parseInt(n.val(),10)&&r.show(),e.$el.find(".elementor-control.elementor-control-form_id").on("change","select",function(){s.formId=l(this).val()}),e.$el.find(".elementor-control.elementor-control-edit_form").on("click","a",a.editFormLinkClick)},widgetPanelObserver:{init:function(e){if(s.observerWidgetId!==s.widgetId){void 0!==s.observer&&l.isFunction(s.observer.disconnect)&&s.observer.disconnect();var t={targetNode:e.$el.find("#elementor-panel-content-wrapper")[0],config:{childList:!0,subtree:!0,attributes:!0}};a.widgetPanelObserver.panel=e,t.observer=new MutationObserver(a.widgetPanelObserver.callback),t.observer.observe(t.targetNode,t.config),s.observerWidgetId=s.widgetId,s.observer=t.observer}},callback:function(e){var t,n=!1;for(var o in e)if("childList"===(t=e[o]).type&&0<t.addedNodes.length&&(n=a.widgetPanelObserver.callbackMutationChildList(t)),"attributes"===t.type&&(n=a.widgetPanelObserver.callbackMutationAttributes(t)),n)return},callbackMutationChildList:function(e){var t,n=e.addedNodes||[];for(var o in n)if((t=n[o])&&t.classList&&t.classList.contains("elementor-control-section_form"))return a.widgetPanelInit(a.widgetPanelObserver.panel),!0;return!1},callbackMutationAttributes:function(e){return!!(e.target&&e.target.classList&&e.target.classList.contains("elementor-tab-control-content"))&&(a.widgetPanelInit(a.widgetPanelObserver.panel),!0)}},editFormLinkClick:function(e){a.findFormSelector(e),a.openBuilderPopup(s.$select.val())},addFormBtnClick:function(e){a.findFormSelector(e),a.openBuilderPopup(0)},findFormSelector:function(e){s.$select=e&&e.$el?e.$el.closest("#elementor-controls").find('select[data-setting="form_id"]'):i.parent.jQuery('#elementor-controls select[data-setting="form_id"]')},selectFormInPreview:function(){s.formId=l(this).val(),a.findFormSelector(),s.$select.val(s.formId).trigger("change")},clickLinkInPreview:function(e){e.target&&e.target.href&&i.open(e.target.href,"_blank","noopener,noreferrer")},disableEvents:function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1},openBuilderPopup:function(e){if(e=parseInt(e||"0",10),!s.$popup){var t=i.parent.jQuery("#elementor-editor-wrapper"),n=wp.template("wpforms-builder-elementor-popup");t.after(n()),s.$popup=t.siblings("#wpforms-builder-elementor-popup")}var o=0<e?wpformsElementorVars.edit_form_url+e:wpformsElementorVars.add_form_url,r=s.$popup.find("iframe");a.builderCloseButtonEvent(),r.attr("src",o),s.$popup.fadeIn()},builderCloseButtonEvent:function(){s.$popup.off("wpformsBuilderInPopupClose").on("wpformsBuilderInPopupClose",function(e,t,n){"saved"===t&&n&&a.refreshFormsList(null,n)})},refreshFormsList:function(e,t){e&&e.preventDefault(),a.findFormSelector();var n={action:"wpforms_admin_get_form_selector_options",nonce:wpformsElementorVars.nonce};s.$select.prop("disabled",!0),l.post(wpformsElementorVars.ajax_url,n).done(function(e){e.success?(s.formSelectOptions=e.data,s.$select.html(e.data),t&&(s.formId=t),s.formId&&""!==s.formId&&s.$select.val(s.formId).trigger("change")):a.debug(e)}).fail(function(e,t){a.debug({xhr:e,textStatus:t})}).always(function(){if(s.$select&&!(s.$select.length<1)){s.$select.prop("disabled",!1);var e=s.$select.find("option"),t=s.$select.closest(".elementor-control");0<e.length&&(t.show(),t.siblings(".elementor-control-add_form_notice").hide()),0<parseInt(s.$select.val(),10)&&t.siblings(".elementor-control-test_form_notice").show()}})},debug:function(e){a.isDebug()&&console.log("WPForms Debug:",e)},isDebug:function(){return i.top.location.hash&&"#wpformsdebug"===i.top.location.hash||wpformsElementorVars.debug}};return a}((document,window),jQuery);WPFormsElementor.init();