var removed_variations=[],removed_person_types=[],product_form_is_valid=!0;jQuery(document).ready(function(e){function t(){e(".variation_manage_stock_ele").each(function(){e(this).off("change").on("change",function(){e(this).is(":checked")?(e(this).parent().find(".variation_non_manage_stock_ele").removeClass("non_stock_ele_hide"),resetCollapsHeight(e("#variations"))):(e(this).parent().find(".variation_non_manage_stock_ele").addClass("non_stock_ele_hide"),resetCollapsHeight(e("#variations")))}).change()}),e(".variation_is_virtual_ele").each(function(){e(this).off("change").on("change",function(){e(this).is(":checked")?(e(this).parent().find(".variation_non_virtual_ele").addClass("non_virtual_ele_hide"),resetCollapsHeight(e("#variations"))):(e(this).parent().find(".variation_non_virtual_ele").removeClass("non_virtual_ele_hide"),resetCollapsHeight(e("#variations")))}).change()}),e(".variation_is_downloadable_ele").each(function(){e(this).off("change").on("change",function(){e(this).is(":checked")?(e(this).parent().find(".variation_downloadable_ele").removeClass("downloadable_ele_hide"),e(this).parent().find(".variation_downloadable_ele").next(".upload_button").removeClass("downloadable_ele_hide"),resetCollapsHeight(e("#variations"))):(e(this).parent().find(".variation_downloadable_ele").addClass("downloadable_ele_hide"),e(this).parent().find(".variation_downloadable_ele").next(".upload_button").addClass("downloadable_ele_hide"),resetCollapsHeight(e("#variations")))}).change()})}function a(a){var i=a.data("limit");"undefined"==typeof i&&(i=-1),1==a.children(".multi_input_block").length&&a.children(".multi_input_block").children(".remove_multi_input_block").css("display","none"),a.children(".multi_input_block").length==i?a.find(".add_multi_input_block").hide():a.find(".add_multi_input_block").show(),a.children(".multi_input_block").each(function(){e(this)[0]!=a.children(".multi_input_block:last")[0]&&e(this).children(".add_multi_input_block").remove()});var l=a.data("has-dummy");l&&a.find(".add_multi_input_block").hide(),a.children(".multi_input_block").children(".add_multi_input_block").off("click").on("click",function(){var s=a.attr("id"),o=a.data("name"),c=a.data("length");c++;var r=a.children(".multi_input_block:first").clone(!1);r.find("textarea,input:not(input[type=button],input[type=submit],input[type=checkbox],input[type=radio])").val(""),r.find("input[type=checkbox]").attr("checked",!1),r.find(".select2-container").remove(),r.find("select").select2(),r.find("select").select2("destroy"),r.removeClass("multi_input_block_dummy"),r.children(".wcfm-wp-fields-uploader,.multi_input_block_element:not(.multi_input_holder)").each(function(){var t=e(this),a=t.data("name");if(t.hasClass("wcfm-wp-fields-uploader")){var i=t;a=i.find(".multi_input_block_element").data("name"),i.find("img").attr("src",i.find("img").data("placeholder")).attr("id",s+"_"+a+"_"+c+"_display").addClass("placeHolder"),i.find(".multi_input_block_element").attr("id",s+"_"+a+"_"+c).attr("name",o+"["+c+"]["+a+"]"),i.find(".upload_button").attr("id",s+"_"+a+"_"+c+"_button").show(),i.find(".remove_button").attr("id",s+"_"+a+"_"+c+"_remove_button").hide(),addWCFMUploaderProperty(i)}else t.attr("name",o+"["+c+"]["+a+"]"),t.attr("id",s+"_"+a+"_"+c);t.hasClass("wcfm_datepicker")?t.removeClass("hasDatepicker").datepicker({dateFormat:t.data("date_format"),changeMonth:!0,changeYear:!0}):t.hasClass("time_picker")&&(e(".time_picker").timepicker("remove").timepicker({step:15}),t.timepicker("remove").timepicker({step:15}))}),r.children(".multi_input_holder").each(function(){n(e(this),s,o,c)}),r.children(".remove_multi_input_block").off("click").on("click",function(){var t=e(this).parent().parent(),n=t.children(".multi_input_block").children(".add_multi_input_block").clone(!0);e(this).parent().remove(),t.children(".multi_input_block").children(".add_multi_input_block").remove(),t.children(".multi_input_block:last").append(n),t.children(".multi_input_block").length==i?t.find(".add_multi_input_block").hide():t.find(".add_multi_input_block").show(),l&&a.find(".add_multi_input_block").hide(),1==t.children(".multi_input_block").length&&t.children(".multi_input_block").children(".remove_multi_input_block").css("display","none"),a.hasClass("wcfm_additional_variation_images")||resetCollapsHeight(a)}),r.children(".add_multi_input_block").remove(),a.append(r),a.children(".multi_input_block:last").append(e(this)),a.children(".multi_input_block").length>1&&a.children(".multi_input_block").children(".remove_multi_input_block").css("display","block"),a.children(".multi_input_block").length==i?a.find(".add_multi_input_block").hide():a.find(".add_multi_input_block").show(),l&&a.find(".add_multi_input_block").hide(),a.data("length",c),t(),a.hasClass("wcfm_additional_variation_images")||resetCollapsHeight(a)}),!a.hasClass("multi_input_block_element"),a.children(".multi_input_block").children(".multi_input_holder").length>0,a.children(".multi_input_block").children(".remove_multi_input_block").off("click").on("click",function(){var t=e(this).parent().parent(),n=t.children(".multi_input_block").children(".add_multi_input_block").clone(!0);e(this).parent().find(1==e('input[data-name="is_taxonomy"]').data("name"))&&($taxonomy=e(this).parent().find(e('input[data-name="tax_name"]')).val(),e("select.wcfm_attribute_taxonomy").find('option[value="'+$taxonomy+'"]').removeAttr("disabled")),e(this).parent().remove(),t.children(".multi_input_block").children(".add_multi_input_block").remove(),t.children(".multi_input_block:last").append(n),1==t.children(".multi_input_block").length&&t.children(".multi_input_block").children(".remove_multi_input_block").css("display","none"),t.children(".multi_input_block").length==i?t.find(".add_multi_input_block").hide():t.find(".add_multi_input_block").show(),l&&a.find(".add_multi_input_block").hide(),a.hasClass("wcfm_additional_variation_images")||resetCollapsHeight(a)})}function i(t){var a=t.attr("id"),i=t.data("name"),n=0;t.children(".multi_input_block").each(function(){e(this).children(".wcfm-wp-fields-uploader,.multi_input_block_element:not(.multi_input_holder)").each(function(){var t=e(this),l=t.data("name");if(t.hasClass("wcfm-wp-fields-uploader")){var s=t;l=s.find(".multi_input_block_element").data("name"),s.find("img").attr("id",a+"_"+l+"_"+n+"_display"),s.find(".multi_input_block_element").attr("id",a+"_"+l+"_"+n).attr("name",i+"["+n+"]["+l+"]"),s.find(".upload_button").attr("id",a+"_"+l+"_"+n+"_button"),s.find(".remove_button").attr("id",a+"_"+l+"_"+n+"_remove_button")}else{var o=t.attr("multiple");"undefined"!=typeof o&&o!==!1?t.attr("name",i+"["+n+"]["+l+"][]"):t.attr("name",i+"["+n+"]["+l+"]"),t.attr("id",a+"_"+l+"_"+n)}}),n++})}function n(t,i,l,s){t.children(".multi_input_block:not(:last)").remove();var o=t.attr("id");o=o.replace(i+"_","");for(var c=o.split("_"),r="",_=0;_<c.length-1;_++)""!=r&&(r+="_"),r+=c[_];t.attr("data-name",l+"["+s+"]["+r+"]"),t.attr("id",i+"_"+r+"_"+s);var d=0;t.children(".multi_input_block").children(".wcfm-wp-fields-uploader,.multi_input_block_element:not(.multi_input_holder)").each(function(){var t=e(this),a=t.data("name");if(t.hasClass("wcfm-wp-fields-uploader")){var n=t;a=n.find(".multi_input_block_element").data("name"),n.find("img").attr("id",i+"_"+r+"_"+s+"_"+a+"_"+d+"_display"),n.find(".multi_input_block_element").attr("id",i+"_"+r+"_"+s+"_"+a+"_"+d).attr("name",l+"["+s+"]["+r+"]["+d+"]["+a+"]"),n.find(".upload_button").attr("id",i+"_"+r+"_"+s+"_"+a+"_"+d+"_button").attr("name",i+"_"+r+"_"+s+"_"+a+"_"+d+"_button"),n.find(".remove_button").attr("id",i+"_"+r+"_"+s+"_"+a+"_"+d+"_remove_button").attr("name",i+"_"+r+"_"+s+"_"+a+"_"+d+"_remove_button"),addWCFMUploaderProperty(n)}else{var o=t.attr("multiple");"undefined"!=typeof o&&o!==!1?t.attr("name",l+"["+s+"]["+r+"]["+d+"]["+a+"][]"):t.attr("name",l+"["+s+"]["+r+"]["+d+"]["+a+"]"),t.attr("id",i+"_"+r+"_"+s+"_"+a+"_"+d)}t.hasClass("wcfm_datepicker")?t.removeClass("hasDatepicker").datepicker({dateFormat:t.data("date_format"),changeMonth:!0,changeYear:!0}):t.hasClass("time_picker")&&(e(".time_picker").timepicker("remove").timepicker({step:15}),t.timepicker("remove").timepicker({step:15})),d++}),a(t),t.children(".multi_input_block").children(".multi_input_holder").length>0&&t.children(".multi_input_block").css("padding-bottom","40px"),t.children(".multi_input_block").children(".multi_input_holder").each(function(){n(e(this),i+"_"+r+"_0",l+"["+s+"]["+r+"]",0)})}function l(){e("#variations").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var t={action:"wcfm_generate_variation_attributes",wcfm_products_manage_form:e("#wcfm_products_manage_form").serialize()};e.ajax({type:"POST",url:wcfm_params.ajax_url,data:t,success:function(t){t&&(e.each(e.parseJSON(t),function(t,a){var i='<select name="default_attributes[attribute_'+t.toLowerCase()+']" class="wcfm-select wcfm_ele wcfm_half_ele default_attribute_ele attribute_ele attribute_ele_new variable" data-name="default_attribute_'+t.toLowerCase()+'"><option value="">Any '+o(t.replace("pa_",""))+" ..</option>";e.each(a,function(e,t){i+='<option value="'+e+'">'+t+"</option>"}),i+="</select>",e(".default_attributes_holder").each(function(){e(this).find('select[data-name="default_attribute_'+t.toLowerCase()+'"]').length>0?($attr_selected_val=e(this).find('select[data-name="default_attribute_'+t.toLowerCase()+'"]').val(),e(this).find('select[data-name="default_attribute_'+t.toLowerCase()+'"]').replaceWith(e(i)),e(this).find('select[data-name="default_attribute_'+t.toLowerCase()+'"]').val($attr_selected_val)):e(this).find('input[data-name="default_attribute_'+t.toLowerCase()+'"]').length>0?($attr_selected_val=e(this).find('input[data-name="default_attribute_'+t.toLowerCase()+'"]').val(),e(this).find('input[data-name="default_attribute_'+t.toLowerCase()+'"]').replaceWith(e(i)),e(this).find('select[data-name="default_attribute_'+t.toLowerCase()+'"]').val($attr_selected_val)):e(this).append(i)});var n='<select name="attribute_'+t.toLowerCase()+'" class="wcfm-select wcfm_ele wcfm_half_ele attribute_ele attribute_ele_new variable multi_input_block_element" data-name="attribute_'+t.toLowerCase()+'"><option value="">Any '+o(t.replace("pa_",""))+" ..</option>";e.each(a,function(e,t){n+='<option value="'+e+'">'+t+"</option>"}),n+="</select>",e("#variations").children(".multi_input_block").each(function(){e(this).find('select[data-name="attribute_'+t.toLowerCase()+'"]').length>0?($attr_selected_val=e(this).find('select[data-name="attribute_'+t.toLowerCase()+'"]').val(),e(this).find('select[data-name="attribute_'+t.toLowerCase()+'"]').replaceWith(e(n)),e(this).find('select[data-name="attribute_'+t.toLowerCase()+'"]').val($attr_selected_val)):e(this).find('input[data-name="attribute_'+t.toLowerCase()+'"]').length>0?($attr_selected_val=e(this).find('input[data-name="attribute_'+t.toLowerCase()+'"]').val(),e(this).find('input[data-name="attribute_'+t.toLowerCase()+'"]').replaceWith(e(n)),e(this).find('select[data-name="attribute_'+t.toLowerCase()+'"]').val($attr_selected_val)):e(this).prepend(n)})}),e(".default_attribute_ele").change(),e(".attribute_ele_old").remove(),e(".attribute_ele_new").addClass("attribute_ele_old").removeClass("attribute_ele_new"),i(e("#variations")),e("#variations").unblock())},dataType:"html"})}function s(){product_form_is_valid=!0,e(".wcfm-message").html("").removeClass("wcfm-error").removeClass("wcfm-success").slideUp();var t=e.trim(e("#wcfm_products_manage_form").find("#title").val());return 0==t.length&&(product_form_is_valid=!1,e("#wcfm_products_manage_form .wcfm-message").html('<span class="wcicon-status-cancelled"></span>'+wcfm_products_manage_messages.no_title).addClass("wcfm-error").slideDown(),audio.play()),e(document.body).trigger("wcfm_products_manage_form_validate"),product_form_is_valid}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}if(e(".page_collapsible").collapsible({defaultOpen:"wcfm_products_manage_form_inventory_head",speed:"slow",loadOpen:function(e){e.next().show()},loadClose:function(e,t){e.next().hide()},animateOpen:function(t,a){e(".collapse-open").addClass("collapse-close").removeClass("collapse-open"),t.addClass("collapse-open"),e(".collapse-close").find("span").removeClass("fa-arrow-alt-circle-right").hide(),t.find("span").addClass("fa-arrow-alt-circle-right").css({"float":"right",padding:"5px"}).show(),e(".wcfm-container:not(:first)").stop(!0,!0).slideUp(a.speed),t.next().stop(!0,!0).slideDown(a.speed)},animateClose:function(e,t){e.find("span").removeClass("fa-arrow-circle-up").hide(),e.next().stop(!0,!0).slideUp(t.speed)}}),e(".page_collapsible").find("span").addClass("fa"),e(".collapse-open").addClass("collapse-close").removeClass("collapse-open"),e(".wcfm-container:not(:first)").hide(),e(".wcfm-tabWrap").find(".page_collapsible:first").click(),e("#product_cats").length>0&&e("#product_cats").select2({placeholder:"Choose Categoies ...",maximumSelectionLength:e("#product_cats").data("catlimit")}),e(".product_taxonomies").length>0&&e(".product_taxonomies").each(function(){e("#"+e(this).attr("id")).select2({placeholder:"Choose "+e(this).attr("id")+" ..."})}),e("#upsell_ids").length>0&&e("#upsell_ids").select2({placeholder:"Choose ..."}),e("#crosssell_ids").length>0&&e("#crosssell_ids").select2({placeholder:"Choose ..."}),e("#grouped_products").length>0&&e("#grouped_products").select2({placeholder:"Choose ..."}),e("#wcfm_associate_vendor").length>0&&e("#wcfm_associate_vendor").select2({}),e("#product_cats_checklist").length>0&&(e(".sub_checklist_toggler").each(function(){e(this).parent().find(".product_taxonomy_sub_checklist").length>0&&e(this).css("visibility","visible"),e(this).click(function(){e(this).toggleClass("fa-arrow-circle-down"),e(this).parent().find(".product_taxonomy_sub_checklist").toggleClass("product_taxonomy_sub_checklist_visible")})}),e(".product_cats_checklist_item_hide_by_cap").attr("disabled",!0)),e("#product_type").length>0){var c=["simple","variable","grouped","external","booking"];e("#product_type").change(function(){var t=e(this).val();e("#product_cats").length>0&&($has_cat=!1,e("#product_cats").find("option").attr("disabled",!0).css("display","none"),e.each(wcfm_product_type_categories,function(a,i){t==a&&e.each(i,function(t,a){e("#product_cats").find('option[value="'+a+'"]').attr("disabled",!1).css("display","block"),$has_cat=!0})}),$has_cat||e("#product_cats").find("option").attr("disabled",!1).css("display","block"),e("#product_cats").select2("destroy"),e("#product_cats").select2({placeholder:"Choose Categoies ...",maximumSelectionLength:e("#product_cats").data("catlimit")})),e("#product_cats_checklist").length>0&&($has_cat=!1,e("#product_cats_checklist").find(".product_cats_checklist_item").children("label").children("input").attr("disabled",!0).addClass("product_cats_checklist_item_hide"),e.each(wcfm_product_type_categories,function(a,i){t==a&&e.each(i,function(t,a){e("#product_cats_checklist").find(".checklist_item_"+a).children("label").children("input").attr("disabled",!1).removeClass("product_cats_checklist_item_hide"),$has_cat=!0})}),$has_cat||e("#product_cats_checklist").find(".product_cats_checklist_item").children("label").children("input").attr("disabled",!1).removeClass("product_cats_checklist_item_hide"),e(".product_cats_checklist_item_hide_by_cap").attr("disabled",!0)),e("#wcfm_products_manage_form .page_collapsible").addClass("wcfm_head_hide"),e("#wcfm_products_manage_form .wcfm-container").addClass("wcfm_block_hide"),e(".wcfm_ele").addClass("wcfm_ele_hide"),e("."+t).removeClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"),-1==e.inArray(t,c)&&(e(".simple").removeClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"),e(".non-"+t).addClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"),t="simple"),"simple"!=t&&e("#is_downloadable").attr("checked",!1),e("#is_downloadable").change(),e(document.body).trigger("wcfm_product_type_changed"),e(".wcaddons").length>0&&e(".wcaddons").removeClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"),collapsHeight=0,e(".page_collapsible").each(function(){e(this).hasClass("wcfm_head_hide")||(collapsHeight+=e(this).height()+21)}),resetCollapsHeight(e("#sku"))}).change(),e("#is_downloadable").change(function(){e(this).is(":checked")?(e(".downlodable").removeClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"),resetCollapsHeight(e("#sku"))):e(".downlodable").addClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide")}).change(),e(".is_downloadable_hidden").change(function(){"enable"==e(this).val()?(e(".downlodable").removeClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"),resetCollapsHeight(e("#sku"))):e(".downlodable").addClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide")}).change(),0==e("#is_downloadable").length&&e(".downlodable").addClass("downloadable_ele_hide"),e("#is_virtual").change(function(){e(this).is(":checked")?e(".nonvirtual").addClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"):e(".nonvirtual").removeClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide")}).change(),e(".is_virtual_hidden").change(function(){"enable"==e(this).val()?e(".nonvirtual").addClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide"):e(".nonvirtual").removeClass("wcfm_ele_hide wcfm_block_hide wcfm_head_hide")}).change()}else e("#wcfm_products_manage_form .page_collapsible").addClass("wcfm_head_hide"),e("#wcfm_products_manage_form .wcfm-container").addClass("wcfm_block_hide"),e(".wcfm_ele").addClass("wcfm_ele_hide");if(e(".variations").click(function(){e(this).hasClass("collapse-open")&&l()}),t(),e(".manage_stock_ele").change(function(){e(this).is(":checked")?e(this).parent().find(".non_manage_stock_ele").removeClass("non_stock_ele_hide"):e(this).parent().find(".non_manage_stock_ele").addClass("non_stock_ele_hide")}).change(),e(".variation_manage_stock").change(function(){e(this).is(":checked")?(e(this).parent().find(".variation_non_manage_stock").removeClass("non_stock_ele_hide"),resetCollapsHeight(e("#variations"))):(e(this).parent().find(".variation_non_manage_stock").addClass("non_stock_ele_hide"),resetCollapsHeight(e("#variations")))}).change(),resetCollapsHeight(e("#sku")),e(".sales_schedule").click(function(){e(".sales_schedule_ele").toggleClass("sales_schedule_ele_show")}),e(".wcfm_datepicker").each(function(){e(this).datepicker({dateFormat:e(this).data("date_format"),changeMonth:!0,changeYear:!0})}),e("#sale_date_from").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",onClose:function(t){e("#sale_date_upto").datepicker("option","minDate",t)}}),e("#sale_date_upto").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",onClose:function(t){e("#sale_date_from").datepicker("option","maxDate",t)}}),e(".multi_input_holder").each(function(){var t=e(this);a(t)}),e("button.wcfm_add_attribute").on("click",function(){var t=e("select.wcfm_attribute_taxonomy").val();if(t){if("add_attribute"!=t){var n={action:"wcfmu_generate_taxonomy_attributes",taxonomy:t};e("#attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),e.ajax({type:"POST",url:wcfm_params.ajax_url,data:n,success:function(t){t&&($response=e(t),e("#attributes").append($response.find(".multi_input_block")),a(e("#attributes")),i(e("#attributes")),e("#product_type").change(),e("#attributes").find(".multi_input_block:last").each(function(){e(this).find('input[data-name="is_variation"]').change(function(){l()})}),e(document.body).trigger("updated_taxonomy_attribute"))}}),e("select.wcfm_attribute_taxonomy").find('option[value="'+t+'"]').attr("disabled","disabled"),e("select.wcfm_attribute_taxonomy").val(""),e("#attributes").unblock()}else e("#attributes").children(".multi_input_block").children(".add_multi_input_block").click();resetCollapsHeight(e("#attributes"))}return!1}),e("#select_attributes").length>0&&(e("#attributes").append(e("#select_attributes").html()),e("#select_attributes").remove(),a(e("#attributes")),i(e("#attributes")),e("#attributes").find(".multi_input_block").find("select").select2({placeholder:"Search for a attribute ..."})),e("#attributes").find(".multi_input_block").each(function(){e(this).find(1==e('input[data-name="is_taxonomy"]').data("name"))&&($taxonomy=e(this).find('input[data-name="tax_name"]').val(),e("select.wcfm_attribute_taxonomy").find('option[value="'+$taxonomy+'"]').attr("disabled","disabled"))}),e("#attributes").find(".multi_input_block").each(function(){e(this).find('input[data-name="is_variation"]').change(function(){l()})}),l(),$default_attributes=e('input[data-name="default_attributes_hidden"]'),$default_attributes.length>0&&($default_attributes_val=$default_attributes.val(),$default_attributes_val.length>0&&e.each(e.parseJSON($default_attributes_val),function(t,a){e(".default_attributes_holder").append('<input type="hidden" name="default_attribute_'+t+'" data-name="default_attribute_'+t+'" value="'+a+'" />')})),e("#variations").children(".multi_input_block").each(function(){$multi_input_block=e(this),$multi_input_block.prepend('<div class="wcfm_clearfix"></div>'),$multi_input_block.prepend('<span class="fields_collapser variations_collapser wcfmfa fa-arrow-circle-down"></span>'),$attributes=$multi_input_block.find('input[data-name="attributes"]'),$attributes_val=$attributes.val(),$attributes_val.length>0&&e.each(e.parseJSON($attributes_val),function(e,t){$multi_input_block.prepend('<input type="hidden" name="'+e+'" data-name="'+e+'" value="'+t+'" />')})}),e("#variations").children(".multi_input_block").children(".add_multi_input_block").click(function(){e("#variations").children(".multi_input_block").children(".variations_collapser").each(function(){e(this).off("click").on("click",function(){e(this).parent().find(".wcfm_ele:not(.attribute_ele), .wcfm_title").toggleClass("variation_ele_hide"),e(this).toggleClass("fa-arrow-circle-up"),resetCollapsHeight(e("#variations"))}),e(this).parent().find(".wcfm_ele:not(.attribute_ele), .wcfm_title").addClass("variation_ele_hide"),e(this).removeClass("fa-arrow-circle-up"),resetCollapsHeight(e("#variations"))}),e("#variations").children(".multi_input_block:last").children(".variations_collapser").click()}),e("#variations").children(".multi_input_block").children(".variations_collapser").each(function(){e(this).addClass("fa-arrow-circle-up"),e(this).off("click").on("click",function(){e(this).parent().find(".wcfm_ele:not(.attribute_ele), .wcfm_title").toggleClass("variation_ele_hide"),e(this).toggleClass("fa-arrow-circle-up"),resetCollapsHeight(e("#variations"))}).click()}),e("#variations").children(".multi_input_block").children(".remove_multi_input_block").click(function(){removed_variations.push(e(this).parent().find(".variation_id").val())}),e("#variations_options").change(function(){if($variations_option=e(this).val(),$variations_option){switch($variations_option){case"set_regular_price":var t=prompt("Regular Price");null!=t&&e("#variations").find('input[data-name="regular_price"]').each(function(){isNaN(parseFloat(t))||e(this).val(parseFloat(t))});break;case"regular_price_increase":var t=prompt("Regular price increase by");null!=t&&e("#variations").find('input[data-name="regular_price"]').each(function(){isNaN(parseFloat(t))||(e(this).val().length>0?e(this).val(parseFloat(e(this).val())+parseFloat(t)):e(this).val(parseFloat(t)))});break;case"regular_price_decrease":var t=prompt("Regular price decrease by");null!=t&&e("#variations").find('input[data-name="regular_price"]').each(function(){isNaN(parseFloat(t))||(e(this).val().length>0?e(this).val(parseFloat(e(this).val())-parseFloat(t)):e(this).val(parseFloat(t)))});break;case"set_sale_price":var a=prompt("Sale Price");null!=a&&e("#variations").find('input[data-name="sale_price"]').each(function(){isNaN(parseFloat(a))||e(this).val(parseFloat(a))});break;case"sale_price_increase":var a=prompt("Sale price increase by");null!=a&&e("#variations").find('input[data-name="sale_price"]').each(function(){isNaN(parseFloat(a))||(e(this).val().length>0?e(this).val(parseFloat(e(this).val())+parseFloat(a)):e(this).val(parseFloat(a)))});break;case"sale_price_decrease":var a=prompt("Sale price decrease by");null!=a&&e("#variations").find('input[data-name="sale_price"]').each(function(){isNaN(parseFloat(a))||(e(this).val().length>0?e(this).val(parseFloat(e(this).val())-parseFloat(a)):e(this).val(parseFloat(a)))});break;case"set_length":var i=prompt("Length");null!=i&&e("#variations").find('input[data-name="length"]').each(function(){isNaN(parseFloat(i))||e(this).val(parseFloat(i))});break;case"set_width":var n=prompt("Width");null!=n&&e("#variations").find('input[data-name="width"]').each(function(){isNaN(parseFloat(n))||e(this).val(parseFloat(n))});break;case"set_height":var l=prompt("Height");null!=l&&e("#variations").find('input[data-name="height"]').each(function(){isNaN(parseFloat(l))||e(this).val(parseFloat(l))});break;case"set_weight":var s=prompt("Weight");null!=s&&e("#variations").find('input[data-name="weight"]').each(function(){isNaN(parseFloat(s))||e(this).val(parseFloat(s))})}e(this).val("")}}),"undefined"!=typeof gmw_forms){tinymce.PluginManager.add("geomywp",function(e,t){e.addButton("geomywp",{text:"GMW Form",icon:!1,onclick:function(){e.windowManager.open({title:"GMW Form",body:[{type:"listbox",name:"form_type",label:"Form Type",values:[{text:"Form",value:"form"},{text:"Map",value:"map"},{text:"Results",value:"results"}]},{type:"listbox",name:"gmw_forms",label:"Select Form",values:gmw_forms}],onsubmit:function(t){"results"==t.data.form_type?e.insertContent('[gmw form="results"]'):"map"==t.data.form_type?e.insertContent('[gmw map="'+t.data.gmw_forms+'"]'):e.insertContent('[gmw form="'+t.data.gmw_forms+'"]')}})}})});tinymce.init({selector:"#excerpt",height:75,menubar:!1,plugins:["advlist autolink lists link charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime image media table contextmenu paste code geomywp directionality"],toolbar:"undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | link image | geomywp  | ltr rtl",content_css:"//www.tinymce.com/css/codepen.min.css",statusbar:!1,browser_spellcheck:!0,entity_encoding:"raw"}),tinymce.init({selector:"#description",height:75,menubar:!1,plugins:["advlist autolink lists link charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime image media table contextmenu paste code geomywp directionality","autoresize"],toolbar:"undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | link image | geomywp  | ltr rtl",content_css:"//www.tinymce.com/css/codepen.min.css",statusbar:!1,browser_spellcheck:!0,entity_encoding:"raw"})}else{if(e("#excerpt").hasClass("rich_editor")){tinymce.init({selector:"#excerpt",height:75,menubar:!1,plugins:["advlist autolink lists link charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime image media table contextmenu paste code directionality"],toolbar:"undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | link image | ltr rtl",content_css:"//www.tinymce.com/css/codepen.min.css",statusbar:!1,browser_spellcheck:!0,entity_encoding:"raw"})}if(e("#description").hasClass("rich_editor")){tinymce.init({selector:"#description",menubar:!1,plugins:["advlist autolink lists link charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime image media table contextmenu paste code directionality","autoresize"],toolbar:"undo redo | insert | styleselect | bold italic | alignleft aligncenter alignright alignjustify |  bullist numlist outdent indent | link image  | ltr rtl",content_css:"//www.tinymce.com/css/codepen.min.css",statusbar:!1,browser_spellcheck:!0,entity_encoding:"raw"})}}e("#wcfm_products_simple_draft_button").click(function(t){if(t.preventDefault(),$is_valid=s(),$is_valid){e("#wcfm-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a="";e("#excerpt").hasClass("rich_editor")?null!=tinymce.get("excerpt")&&(a=tinymce.get("excerpt").getContent({format:"raw"})):a=e("#excerpt").val();var i="";e("#description").hasClass("rich_editor")?null!=tinymce.get("description")&&(i=tinymce.get("description").getContent({format:"raw"})):i=e("#description").val();var n={action:"wcfm_ajax_controller",controller:"wcfm-products-manage",wcfm_products_manage_form:e("#wcfm_products_manage_form").serialize(),excerpt:a,description:i,status:"draft",removed_variations:removed_variations,removed_person_types:removed_person_types};e.post(wcfm_params.ajax_url,n,function(t){t&&($response_json=e.parseJSON(t),e(".wcfm-message").html("").removeClass("wcfm-error").removeClass("wcfm-success").slideUp(),$response_json.status?(audio.play(),e("#wcfm_products_manage_form .wcfm-message").html('<span class="wcicon-status-completed"></span>'+$response_json.message).addClass("wcfm-success").slideDown("slow",function(){$response_json.redirect&&(window.location=$response_json.redirect)})):(audio.play(),e("#wcfm_products_manage_form .wcfm-message").html('<span class="wcicon-status-cancelled"></span>'+$response_json.message).addClass("wcfm-error").slideDown()),$response_json.id&&e("#pro_id").val($response_json.id),e("#wcfm-content").unblock())})}}),e("#wcfm_products_simple_submit_button").click(function(t){if(t.preventDefault(),$is_valid=s(),$is_valid){e("#wcfm-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a="";e("#excerpt").hasClass("rich_editor")?null!=tinymce.get("excerpt")&&(a=tinymce.get("excerpt").getContent({format:"raw"})):a=e("#excerpt").val();var i="";e("#description").hasClass("rich_editor")?null!=tinymce.get("description")&&(i=tinymce.get("description").getContent({format:"raw"})):i=e("#description").val();var n={action:"wcfm_ajax_controller",controller:"wcfm-products-manage",wcfm_products_manage_form:e("#wcfm_products_manage_form").serialize(),excerpt:a,description:i,status:"submit",removed_variations:removed_variations,removed_person_types:removed_person_types};e.post(wcfm_params.ajax_url,n,function(t){t&&($response_json=e.parseJSON(t),e(".wcfm-message").html("").removeClass("wcfm-error").removeClass("wcfm-success").slideUp(),$response_json.status?(audio.play(),e("#wcfm_products_manage_form .wcfm-message").html('<span class="wcicon-status-completed"></span>'+$response_json.message).addClass("wcfm-success").slideDown("slow",function(){$response_json.redirect&&(window.location=$response_json.redirect)})):(audio.play(),e("#wcfm_products_manage_form .wcfm-message").html('<span class="wcicon-status-cancelled"></span>'+$response_json.message).addClass("wcfm-error").slideDown()),$response_json.id&&e("#pro_id").val($response_json.id),e("#wcfm-content").unblock())})}})});