(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{602:function(e,t,n){"use strict";var i=n(107),o=n.n(i),r=n(108),a=n.n(r),s=n(528),l=n.n(s),c=n(527),u=n.n(c),d=n(529),p=n.n(d),m=n(34),h=n.n(m),f=n(10),b=n.n(f),v=n(12),g=n.n(v),y=n(526),k=n.n(y),E=n(1),w=n(534),C=n.n(w),I=(n(629),function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return p()(t,e),a()(t,[{key:"render",value:function(){var e=k()("external-link",this.props.className,{"icon-first":!!this.props.showIconFirst},{"has-icon":!!this.props.icon}),t=Object(E.assign)({},Object(E.omit)(this.props,"icon","iconSize","showIconFirst","iconClassName"),{className:e,rel:"external"});t.target&&(t.rel=t.rel.concat(" noopener noreferrer"));var n=b.a.createElement(C.a,{className:this.props.iconClassName,icon:"external",size:this.props.iconSize});return b.a.createElement("a",t,this.props.icon&&this.props.showIconFirst&&n,this.props.children,this.props.icon&&!this.props.showIconFirst&&n)}}]),t}(f.Component));h()(I,"defaultProps",{iconSize:18,showIconFirst:!1}),h()(I,"propTypes",{className:g.a.string,href:g.a.string,onClick:g.a.func,icon:g.a.bool,iconSize:g.a.number,target:g.a.string,showIconFirst:g.a.bool,iconClassName:g.a.string}),t.a=I},629:function(e,t,n){},632:function(e,t,n){"use strict";var i=n(107),o=n.n(i),r=n(108),a=n.n(r),s=n(528),l=n.n(s),c=n(527),u=n.n(c),d=n(531),p=n.n(d),m=n(529),h=n.n(m),f=n(34),b=n.n(f),v=n(12),g=n.n(v),y=n(10),k=n.n(y),E=n(77),w=n.n(E),C=n(109),I=n(47),R=n.n(I),O=n(526),N=n.n(O),_=n(660),D=n.n(_),j=n(1),P=n(628),L=n(76),x=n.n(L),S=n(670),q=n.n(S),T=R()("calypso:popover:util");function M(){var e={};return e.top=window.scrollY,e.left=window.scrollX,e.width=window.innerWidth,e.height=window.innerHeight,e.right=e.left+e.width,e.bottom=e.top+e.height,T("viewport: %o",e),e}var A={top:"bottom",bottom:"top",left:"right",right:"left"},z={top:"right",left:"top",bottom:"left",right:"bottom"},U=M();function F(){U=M()}var V=!1,B=function(){if(V)return T("window events already bound");V=!0,T("bind handlers to `resize` and `scroll` events"),window.addEventListener("resize",F,!0),window.addEventListener("scroll",F,!0)},W=function(){if(!V)return T("window events are not bound");V=!1,T("unbind handlers to `resize` and `scroll` events"),window.removeEventListener("resize",F,!0),window.removeEventListener("scroll",F,!0)},H=function(e,t,n){var i=q()(n),o=t.clientHeight,r=t.clientWidth,a={top:i.top-o,bottom:U.height-i.bottom-o,left:i.left-r,right:U.width-i.right-r},s=e.split(/\s+/),l=x()(s,1)[0],c=x()(s,2)[1],u=function(e,t){for(var n,i=[e,A[e],z[e],A[z[e]]],o=-1/0,r=0,a=i.length;r<a;r++){var s=i[r],l=t[s];if(l>0)return s;l>o&&(o=l,n=e)}return n}(l,a);return c!==u&&c!==A[u]||(c=null),function(e,t,n,i,o,r){for(var a,s="top"===e||"bottom"===e,l=t?[s?"".concat(e," ").concat(t):"".concat(t," ").concat(e),e,s?"".concat(e," ").concat(A[t]):"".concat(A[t]," ").concat(e)]:[e,s?"".concat(e," ").concat(z[e]):"".concat(z[e]," ").concat(e),s?"".concat(e," ").concat(A[z[e]]):"".concat(A[z[e]]," ").concat(e)],c=0,u=o*r,d=0,p=l.length;d<p;d++){var m=l[d],h=K(m,n,i),f=h.left+o,b=h.top+r,v=Math.min(h.top<U.top?b-U.top:U.bottom-h.top,r),g=Math.min(h.left<U.left?f-U.left:U.right-h.left,o),y=g*v;if(y===u)return m;y>c&&(c=y,a=m)}return a}(u,c,t,n,r,o)||e};function K(e,t,n,i){var o=q()(t);if(!o)throw new Error("could not get bounding client rect of Tip element");var r=o.width,a=o.height,s=q()(n);if(!s)throw new Error("could not get bounding client rect of `target`");var l=s.width,c=s.height,u=function(e,t){var n=t.body||t.getElementsByTagName("body")[0],i=t.documentElement||n.parentNode,o=i.clientTop||n.clientTop||0,r=i.clientLeft||n.clientLeft||0,a=window.pageYOffset||i.scrollTop,s=window.pageXOffset||i.scrollLeft;return{top:e.top+a-o,left:e.left+s-r}}(s,document);if(!u)throw new Error("could not determine page offset of `target`");var d={};switch(e){case"top":d={top:u.top-a,left:i&&i.left?u.left+i.left:u.left+l/2-r/2};break;case"bottom":d={top:u.top+c,left:i&&i.left?u.left+i.left:u.left+l/2-r/2};break;case"right":d={top:u.top+c/2-a/2,left:u.left+l};break;case"left":d={top:u.top+c/2-a/2,left:u.left-r};break;case"top left":d={top:u.top-a,left:u.left+l/2-r+15};break;case"top right":d={top:u.top-a,left:u.left+l/2-15};break;case"bottom left":d={top:u.top+c,left:u.left+l/2-r+15};break;case"bottom right":d={top:u.top+c,left:u.left+l/2-15};break;case"left top":d={top:u.top+c/2-a,left:u.left-r};break;case"left bottom":d={top:u.top+c/2,left:u.left-r};break;case"right top":d={top:u.top+c/2-a,left:u.left+l};break;case"right bottom":d={top:u.top+c/2,left:u.left+l};break;default:throw new Error('invalid position "'.concat(e,'"'))}return d}var Y=function(){},J=R()("calypso:popover"),X=new Set,G=function(e){function t(e){var n;return o()(this,t),n=l()(this,u()(t).call(this,e)),b()(p()(n),"isUpdatingPosition",!1),n.setPopoverId(e.id),n.setDOMBehavior=n.setDOMBehavior.bind(p()(n)),n.setPosition=n.setPosition.bind(p()(n)),n.onClickout=n.onClickout.bind(p()(n)),n.onKeydown=n.onKeydown.bind(p()(n)),n.onWindowChange=n.onWindowChange.bind(p()(n)),n.state={show:e.isVisible,left:-99999,top:-99999,positionClass:n.getPositionClass(e.position)},n}return h()(t,e),a()(t,[{key:"componentDidMount",value:function(){this.state.show&&(this.bindEscKeyListener(),this.bindDebouncedReposition(),B())}},{key:"componentWillReceiveProps",value:function(e){if(this.domContext=w.a.findDOMNode(e.context),!e.isVisible)return null;this.setPosition()}},{key:"componentDidUpdate",value:function(e,t){var n=this,i=this.props.isVisible;return!t.show&&this.state.show&&(this.bindEscKeyListener(),this.bindDebouncedReposition(),B()),i!==e.isVisible&&(i?this.show():this.hide()),this.domContainer&&this.domContext&&i?void(this.isUpdatingPosition||(this.debug("requesting to update position after render completes"),requestAnimationFrame(function(){X.has(n.id)&&n.domContainer&&n.domContext&&i?(n.setPosition(),n.isUpdatingPosition=!1):n.isUpdatingPosition=!1}),this.isUpdatingPosition=!0)):null}},{key:"componentWillUnmount",value:function(){this.debug("unmounting .... "),this.unbindClickoutHandler(),this.unbindDebouncedReposition(),this.unbindEscKeyListener(),W(),X.delete(this.id),J("current popover instances: ",X.size)}},{key:"bindEscKeyListener",value:function(){if(!this.props.closeOnEsc)return null;this.debug("adding escKey listener ..."),document.addEventListener("keydown",this.onKeydown,!0)}},{key:"unbindEscKeyListener",value:function(){if(!this.props.closeOnEsc)return null;this.debug("unbinding `escKey` listener ..."),document.removeEventListener("keydown",this.onKeydown,!0)}},{key:"onKeydown",value:function(e){if(27!==e.keyCode)return null;this.close(!0)}},{key:"bindClickoutHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.domContainer;return e?this._clickoutHandlerReference?(this.debug("clickout event already bound"),null):(this.debug("binding `clickout` event"),void(this._clickoutHandlerReference=D()(e,this.onClickout))):(this.debug("no element to bind clickout "),null)}},{key:"unbindClickoutHandler",value:function(){this._clickoutHandlerReference&&(this.debug("unbinding `clickout` listener ..."),this._clickoutHandlerReference(),this._clickoutHandlerReference=null)}},{key:"onClickout",value:function(e){var t=this.domContext&&this.domContext.contains&&!this.domContext.contains(e.target);if(this.props.ignoreContext&&t){var n=w.a.findDOMNode(this.props.ignoreContext);t=t&&n&&n.contains&&!n.contains(e.target)}t&&this.close()}},{key:"bindDebouncedReposition",value:function(){window.addEventListener("scroll",this.onWindowChange,!0),window.addEventListener("resize",this.onWindowChange,!0)}},{key:"unbindDebouncedReposition",value:function(){this.willReposition&&(window.cancelAnimationFrame(this.willReposition),this.willReposition=null),window.removeEventListener("scroll",this.onWindowChange,!0),window.removeEventListener("resize",this.onWindowChange,!0),this.debug("unbinding `debounce reposition` ...")}},{key:"onWindowChange",value:function(){this.willReposition=window.requestAnimationFrame(this.setPosition)}},{key:"setDOMBehavior",value:function(e){if(!e)return this.unbindClickoutHandler(),null;this.debug("setting DOM behavior"),this.bindClickoutHandler(e),this.domContainer=e,this.domContext=w.a.findDOMNode(this.props.context),this.setPosition()}},{key:"getPositionClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.position;return"is-".concat(e.replace(/\s+/g,"-"))}},{key:"adjustRtlPosition",value:function(e){if(this.props.isRtl)switch(e){case"top right":case"right top":return"top left";case"right":return"left";case"bottom right":case"right bottom":return"bottom left";case"bottom left":case"left bottom":return"bottom right";case"left":return"right";case"top left":case"left top":return"top right"}return e}},{key:"computePosition",value:function(){if(!this.props.isVisible)return null;var e=this.domContainer,t=this.domContext,n=this.props,i=n.position,o=n.relativePosition;if(!e||!t)return this.debug("[WARN] no DOM elements to work"),null;var r=i;this.debug("position: %o",r),this.props.autoRtl&&(r=this.adjustRtlPosition(r),this.debug("RTL adjusted position: %o",r)),this.props.autoPosition&&(r=H(r,e,t),this.debug("suggested position: %o",r));var a=Object.assign({},function(e,t){var n=q()(t).width;return e.left=Math.max(0,Math.min(e.left,U.width-n)),e}(K(r,e,t,o),e),{positionClass:this.getPositionClass(r)});return this.debug("updating reposition: ",a),a}},{key:"debug",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];J.apply(void 0,["[%s] ".concat(e),this.id].concat(n))}},{key:"setPopoverId",value:function(e){this.id=e||"pop__".concat(Object(j.uniqueId)()),X.add(this.id),this.debug("creating ..."),J("current popover instances: ",X.size)}},{key:"setPosition",value:function(){var e;if(this.debug("updating position"),!(e=this.props.customPosition?Object.assign({positionClass:this.getPositionClass(this.constructor.defaultProps.position)},this.props.customPosition):this.computePosition()))return null;this.willReposition=null,this.setState(e)}},{key:"getStylePosition",value:function(){var e=this.state;return{left:e.left,top:e.top}}},{key:"show",value:function(){var e=this;if(!this.props.showDelay)return this.setState({show:!0}),null;this.debug("showing in %o","".concat(this.props.showDelay,"ms")),this.clearShowTimer(),this._openDelayTimer=setTimeout(function(){e.setState({show:!0})},this.props.showDelay)}},{key:"hide",value:function(){this.unbindClickoutHandler(),this.unbindDebouncedReposition(),this.unbindEscKeyListener(),W(),this.setState({show:!1}),this.clearShowTimer()}},{key:"clearShowTimer",value:function(){if(!this._openDelayTimer)return null;clearTimeout(this._openDelayTimer),this._openDelayTimer=null}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.props.isVisible)return this.debug("popover should be already closed"),null;this.props.onClose(e)}},{key:"render",value:function(){if(!this.state.show)return this.debug("is hidden. return no render"),null;if(!this.props.context)return this.debug("No `context` to tie. return no render"),null;var e=N()("popover",this.props.className,this.state.positionClass);return this.debug("rendering ..."),k.a.createElement(P.a,{className:this.props.rootClassName},k.a.createElement("div",{style:this.getStylePosition(),className:e},k.a.createElement("div",{className:"popover__arrow"}),k.a.createElement("div",{ref:this.setDOMBehavior,className:"popover__inner"},this.props.children)))}}]),t}(y.Component);b()(G,"propTypes",{autoPosition:g.a.bool,autoRtl:g.a.bool,className:g.a.string,closeOnEsc:g.a.bool,id:g.a.string,ignoreContext:g.a.shape({getDOMNode:g.a.function}),isRtl:g.a.bool,isVisible:g.a.bool,position:g.a.oneOf(["top","top right","right","bottom right","bottom","bottom left","left","top left"]),rootClassName:g.a.string,showDelay:g.a.number,onClose:g.a.func,onShow:g.a.func,relativePosition:g.a.shape({left:g.a.number}),customPosition:g.a.shape({top:g.a.number,left:g.a.number,positionClass:g.a.oneOf(["top","right","bottom","left"])})}),b()(G,"defaultProps",{autoPosition:!0,autoRtl:!0,className:"",closeOnEsc:!0,isRtl:!1,isVisible:!1,position:"top",showDelay:0,onClose:Y,onShow:Y});t.a=Object(C.b)(function(e){return{isRtl:document.body.classList.contains("rtl")}})(G)},674:function(e,t,n){"use strict";var i=n(107),o=n.n(i),r=n(108),a=n.n(r),s=n(528),l=n.n(s),c=n(527),u=n.n(c),d=n(529),p=n.n(d),m=n(10),h=n(12),f=n.n(h),b=n(109),v=n(30),g=n(566),y=n(544),k=function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return p()(t,e),a()(t,[{key:"fetch",value:function(e){var t=e.siteId,n=e.loaded,i=e.fetching,o=e.error;n||i||o||this.props.fetchSettings(t)}},{key:"UNSAFE_componentWillMount",value:function(){this.fetch(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fetch(e)}},{key:"render",value:function(){return null}}]),t}(m.Component);k.propTypes={siteId:f.a.number.isRequired},t.a=Object(b.b)(function(e){return{loaded:Object(y.d)(e),fetching:Object(y.c)(e),error:Object(y.b)(e)}},function(e){return Object(v.b)({fetchSettings:g.a},e)})(k)},675:function(e,t,n){"use strict";var i=n(107),o=n.n(i),r=n(108),a=n.n(r),s=n(528),l=n.n(s),c=n(527),u=n.n(c),d=n(529),p=n.n(d),m=n(10),h=n(12),f=n.n(h),b=n(109),v=n(30),g=n(555),y=n(541),k=function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return p()(t,e),a()(t,[{key:"fetch",value:function(e){var t=e.siteId,n=e.loaded,i=e.fetching,o=e.error;n||i||o||this.props.fetchSettings(t)}},{key:"UNSAFE_componentWillMount",value:function(){this.fetch(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fetch(e)}},{key:"render",value:function(){return null}}]),t}(m.Component);k.propTypes={siteId:f.a.number.isRequired},t.a=Object(b.b)(function(e){return{loaded:Object(y.i)(e),fetching:Object(y.h)(e),error:Object(y.g)(e)}},function(e){return Object(v.b)({fetchSettings:g.fetchSettings},e)})(k)},680:function(e,t,n){},681:function(e,t,n){},683:function(e,t,n){"use strict";var i=n(107),o=n.n(i),r=n(108),a=n.n(r),s=n(528),l=n.n(s),c=n(527),u=n.n(c),d=n(531),p=n.n(d),m=n(529),h=n.n(m),f=n(34),b=n.n(f),v=n(109),g=n(35),y=n(12),k=n.n(y),E=n(10),w=n.n(E),C=n(1),I=(n(680),n(616)),R=n(534),O=n.n(R),N=n(583),_=n.n(N),D=n(30),j=n(788),P=n(526),L=n.n(P),x=n(542),S=n(632),q=function(e){return"HR"===e.tagName},T=function(e){function t(){var e,n;o()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(p()(n),"menu",w.a.createRef()),b()(p()(n),"_setPropsOnChild",function(e){if(null==e)return e;var t=n._onClose.bind(p()(n),e.props.action),i=t;return e.props.onClick&&(i=Object(C.over)([e.props.onClick,t])),w.a.cloneElement(e,{onClick:i})}),b()(p()(n),"_onShow",function(){var e=n.menu.current;n._previouslyFocusedElement=document.activeElement,e&&e.focus()}),b()(p()(n),"_getClosestSibling",function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=n.menu.current,o=i.firstChild,r=i.lastChild;if(t||(o=i.lastChild,r=i.firstChild),e===i)return o;var a=e[t?"nextSibling":"previousSibling"]||r;return q(a)?n._getClosestSibling(a,t):a}),b()(p()(n),"_onKeyDown",function(e){var t,i=e.target,o=!1;switch(e.keyCode){case 9:n.props.onClose(),o=!0;break;case 38:t=n._getClosestSibling(i,!1),o=!0;break;case 40:t=n._getClosestSibling(i,!0),o=!0}t&&t.focus(),o&&e.preventDefault()}),b()(p()(n),"_onClose",function(e){n._previouslyFocusedElement&&(n._previouslyFocusedElement.focus(),n._previouslyFocusedElement=null),n.props.onClose&&n.props.onClose(e)}),n}return h()(t,e),a()(t,[{key:"componentWillUnmount",value:function(){this._previouslyFocusedElement=null}},{key:"render",value:function(){var e=this.props,t=e.popoverComponent,n=e.autoPosition,i=e.className,o=e.context,r=e.customPosition,a=e.isVisible,s=e.popoverTitle,l=e.position,c=e.rootClassName;return w.a.createElement(t,{onClose:this._onClose,onShow:this._onShow,autoPosition:n,className:i,context:o,customPosition:r,isVisible:a,popoverTitle:s,position:l,rootClassName:c},w.a.createElement("div",{ref:this.menu,role:"menu",className:"popover__menu",onKeyDown:this._onKeyDown,tabIndex:"-1"},w.a.Children.map(this.props.children,this._setPropsOnChild,this)))}}]),t}(E.Component);b()(T,"propTypes",{autoPosition:k.a.bool,isVisible:k.a.bool.isRequired,onClose:k.a.func.isRequired,position:k.a.string,className:k.a.string,rootClassName:k.a.string,popoverComponent:k.a.func,popoverTitle:k.a.string,customPosition:k.a.object}),b()(T,"defaultProps",{autoPosition:!0,position:"top",popoverComponent:S.a});var M=T,A=(n(681),function(e){function t(){var e,n;o()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(p()(n),"state",{isMenuVisible:!1}),b()(p()(n),"popoverContext",w.a.createRef()),b()(p()(n),"handleClick",function(e){var t=n.props.onClick,i=n.state.isMenuVisible;t(e),i?n.hideMenu():n.showMenu()}),b()(p()(n),"hideMenu",function(){return n.toggleMenu(!1)}),b()(p()(n),"showMenu",function(){return n.toggleMenu(!0)}),n}return h()(t,e),a()(t,[{key:"toggleMenu",value:function(e){this.props.disabled||(this.setState({isMenuVisible:e}),this.props.onToggle(e))}},{key:"render",value:function(){var e=this.props,t=e.toggleTitle,n=e.translate,i=e.position,o=e.children,r=e.disabled,a=e.className,s=e.popoverClassName,l=this.state.isMenuVisible,c=L()("ellipsis-menu",a,{"is-menu-visible":l,"is-disabled":r}),u=L()("ellipsis-menu__menu","popover",s);return w.a.createElement("span",{className:c},w.a.createElement(x.a,{ref:this.popoverContext,onClick:this.handleClick,title:t||n("Toggle menu"),borderless:!0,disabled:r,className:"ellipsis-menu__toggle"},w.a.createElement(O.a,{icon:"ellipsis",className:"ellipsis-menu__toggle-icon"})),w.a.createElement(M,{isVisible:l,onClose:this.hideMenu,position:i,context:this.popoverContext.current,className:u},o))}}]),t}(E.Component));b()(A,"propTypes",{translate:k.a.func,toggleTitle:k.a.string,position:k.a.string,disabled:k.a.bool,onClick:k.a.func,onToggle:k.a.func,popoverClassName:k.a.string}),b()(A,"defaultProps",{onClick:C.noop,onToggle:C.noop});var z=Object(g.localize)(A),U=n(530),F=n.n(U),V=n(602),B=function(e){function t(){var e,n;o()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(p()(n),"handleMouseOver",function(e){n.props.focusOnHover&&e.target.focus(),n.props.onMouseOver()}),n}return h()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,i=e.href,o=e.icon,r=e.isSelected,a=e.isExternalLink,s=Object(C.omit)(this.props,"icon","focusOnHover","isSelected","isExternalLink","className","itemComponent"),l=L()("popover__menu-item",n,{"is-selected":r}),c=this.props.itemComponent;return a&&i?(c=V.a,s.icon=!0):i&&(c="a"),w.a.createElement(c,F()({role:"menuitem",onMouseOver:this.handleMouseOver,tabIndex:"-1",className:l},s),o&&w.a.createElement(O.a,{icon:o,size:18}),t)}}]),t}(E.Component);b()(B,"propTypes",{href:k.a.string,className:k.a.string,isSelected:k.a.bool,icon:k.a.string,focusOnHover:k.a.bool,onMouseOver:k.a.func,isExternalLink:k.a.bool,itemComponent:k.a.oneOfType([k.a.func,k.a.string])}),b()(B,"defaultProps",{isSelected:!1,focusOnHover:!0,onMouseOver:C.noop,itemComponent:"button"});var W=n(551),H=n(549),K=n(540),Y=n(537),J=function(e){var t=e.orderId,n=e.siteId,i=e.refundDialog,o=e.createdDate,r=e.refundableAmount,a=e.currency,s=e.labelId,l=e.translate,c=e.moment,u=e.label,d=void 0===u?{}:u,p=function(){return _()(r,a)},m=function(){return e.closeRefundDialog(t,n)},h=[{action:"cancel",label:l("Cancel"),onClick:m},{action:"confirm",onClick:function(){return e.confirmRefund(t,n)},isPrimary:!0,disabled:i&&i.isSubmitting,additionalClassNames:i&&i.isSubmitting?"is-busy":"",label:l("Refund label (-%(amount)s)",{args:{amount:p()}})}];return w.a.createElement(W.a,{additionalClassNames:"label-refund-modal woocommerce wcc-root",isVisible:Boolean(i&&i.labelId===s),onClose:m,buttons:h},w.a.createElement(H.a,null,l("Request a refund")),w.a.createElement("p",null,l("You can request a refund for a shipping label that has not been used to ship a package. It will take at least %(days)s days to process.",{args:{days:"dhlexpress"===d.carrier_id?"31":"14"}})),w.a.createElement("dl",null,w.a.createElement("dt",null,l("Purchase date")),w.a.createElement("dd",null,c(o).format("LLL")),w.a.createElement("dt",null,l("Amount eligible for refund")),w.a.createElement("dd",null,p())))};J.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,refundDialog:k.a.object,createdDate:k.a.number,refundableAmount:k.a.number,currency:k.a.string,labelId:k.a.number,closeRefundDialog:k.a.func.isRequired,confirmRefund:k.a.func.isRequired};var X=Object(v.b)(function(e,t){var n=t.orderId,i=t.siteId,o=t.labelId,r=Object(Y.t)(e,n,i),a=Object(Y.j)(e,n,i);return{refundDialog:r?a.refundDialog:{},label:Object(Y.g)(e,n,i,o)}},function(e){return Object(D.b)({closeRefundDialog:K.e,confirmRefund:K.k},e)})(Object(g.localize)(J)),G=n(601),Q=n(605),Z=function(e){var t=e.orderId,n=e.siteId,i=e.reprintDialog,o=e.paperSize,r=e.storeOptions,a=e.labelId,s=e.translate,l=function(){return e.closeReprintDialog(t,n)},c=[{action:"cancel",label:s("Cancel"),onClick:l},{action:"confirm",onClick:function(){return e.confirmReprint(t,n)},isPrimary:!0,disabled:i&&!i.fileData,additionalClassNames:i&&i.isFetching?"is-busy":"",label:s("Print")}];return w.a.createElement(W.a,{isVisible:Boolean(i&&i.labelId===a),onClose:l,buttons:c,additionalClassNames:"label-reprint-modal woocommerce wcc-root"},w.a.createElement(H.a,null,s("Reprint shipping label")),w.a.createElement("p",null,s("If there was a printing error when you purchased the label, you can print it again.")),w.a.createElement("p",{className:"shipping-label__reprint-modal-notice"},s("NOTE: If you already used the label in a package, printing and using it again is a violation of our terms of service and may result in criminal charges.")),w.a.createElement(G.a,{id:"paper_size",valuesMap:Object(Q.a)(r.origin_country),title:s("Paper size"),value:o,updateValue:function(i){return e.updatePaperSize(t,n,i)}}))};Z.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,reprintDialog:k.a.object,paperSize:k.a.string.isRequired,storeOptions:k.a.object.isRequired,labelId:k.a.number,closeReprintDialog:k.a.func.isRequired,confirmReprint:k.a.func.isRequired};var $=Object(v.b)(function(e,t){var n=t.orderId,i=t.siteId,o=Object(Y.t)(e,n,i),r=Object(Y.j)(e,n,i);return{reprintDialog:o?r.reprintDialog:{},paperSize:r.paperSize,storeOptions:o?r.storeOptions:{}}},function(e){return Object(D.b)({closeReprintDialog:K.f,confirmReprint:K.l,updatePaperSize:K.X},e)})(Object(g.localize)(Z)),ee=n(645),te=n(544),ne=function(e){var t=e.orderId,n=e.siteId,i=e.isVisible,o=e.labelIndex,r=e.serviceName,a=e.packageName,s=e.productNames,l=e.canManagePayments,c=e.receiptId,u=e.translate,d=function(){return e.closeDetailsDialog(t,n)},p=[{action:"close",label:u("Close"),onClick:d}];return w.a.createElement(W.a,{additionalClassNames:"label-details-modal woocommerce wcc-root",isVisible:i,onClose:d,buttons:p},w.a.createElement(H.a,{className:"shipping-label__label-details-modal-heading"},w.a.createElement("span",{className:"shipping-label__label-details-modal-heading-title"},u("Label #%(labelIndex)s details",{args:{labelIndex:o+1}})),l&&c?w.a.createElement("a",{href:"".concat(Object(ee.a)(),"/me/purchases/billing/").concat(c),target:"_blank",rel:"noopener noreferrer"},u("Receipt")):null),w.a.createElement("dl",null,w.a.createElement("dt",null,u("Service")),w.a.createElement("dd",null,r),w.a.createElement("dt",null,u("Package")),w.a.createElement("dd",null,a),w.a.createElement("dt",null,u("Items")),w.a.createElement("dd",null,w.a.createElement("ul",null,s.map(function(e,t){return w.a.createElement("li",{key:t},e)})))))};ne.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,isVisible:k.a.bool,serviceName:k.a.string,packageName:k.a.string,productNames:k.a.array,closeDetailsDialog:k.a.func.isRequired,receiptId:k.a.number};var ie=Object(v.b)(function(e,t){var n=t.orderId,i=t.siteId,o=t.labelId,r=Object(Y.t)(e,n,i),a=Object(Y.j)(e,n,i).detailsDialog;return{isVisible:Boolean(r&&a&&a.labelId===o),canManagePayments:Object(te.q)(e,i)}},function(e){return Object(D.b)({closeDetailsDialog:K.c},e)})(Object(g.localize)(ne)),oe={usps:function(e){return"https://tools.usps.com/go/TrackConfirmAction.action?tLabels=".concat(e)},fedex:function(e){return"https://www.fedex.com/apps/fedextrack/?action=track&tracknumbers=".concat(e)},ups:function(e){return"https://www.ups.com/track?loc=en_US&tracknum=".concat(e)},dhlexpress:function(e){return"https://www.dhl.com/en/express/tracking.html?AWB=".concat(e,"&brand=DHL")}},re=function(e){var t=e.tracking,n=e.carrierId,i=e.translate;if(!t)return w.a.createElement("span",null,i("N/A"));var o=oe[n](t);return o?w.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},t," ",w.a.createElement(O.a,{icon:"external",size:12})):w.a.createElement("span",null,t)};re.propTypes={tracking:k.a.string,carrierId:k.a.string};var ae=Object(g.localize)(re),se=function(e){function t(){var e,n;o()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(p()(n),"renderRefund",function(e,t,i,o){var r=n.props,a=r.orderId,s=r.siteId,l=r.translate,c="",u=!1;if(t?(c=l("Labels older than 30 days cannot be refunded."),u=!0):"usps"!==i||o||(c=l("USPS labels without tracking are not eligible for refund."),u=!0),u)return w.a.createElement(j.a,{position:"top left",text:c},w.a.createElement("button",{className:"popover__menu-item shipping-label__item-menu-reprint-expired",role:"menuitem",tabIndex:"-1"},w.a.createElement(O.a,{icon:"refund",size:18}),w.a.createElement("span",null," ",l("Request refund")," ")));return w.a.createElement(B,{onClick:function(){n.props.openRefundDialog(a,s,e)},icon:"refund"},l("Request refund"))}),b()(p()(n),"renderReprint",function(e,t){var i=n.props,o=i.orderId,r=i.siteId,a=i.translate;if(t)return w.a.createElement(j.a,{position:"top left",text:a("Label images older than 180 days are deleted by our technology partners for general security and data privacy concerns.")},w.a.createElement("button",{className:"popover__menu-item shipping-label__item-menu-reprint-expired",role:"menuitem",tabIndex:"-1"},w.a.createElement(O.a,{icon:"print",size:18}),w.a.createElement("span",null," ",a("Reprint")," ")));return w.a.createElement(B,{onClick:function(){n.props.openReprintDialog(o,r,e)},icon:"print"},a("Reprint shipping label"))}),b()(p()(n),"renderLabelDetails",function(e){var t=n.props,i=t.orderId,o=t.siteId,r=t.translate;return w.a.createElement(B,{onClick:function(){n.props.openDetailsDialog(i,o,e)},icon:"info-outline"},r("View details"))}),b()(p()(n),"renderPickup",function(e){var t=n.props.translate,i={usps:"https://tools.usps.com/schedule-pickup-steps.htm",fedex:"https://www.fedex.com/en-us/shipping/schedule-manage-pickups.html",ups:"https://wwwapps.ups.com/pickup/request",dhlexpress:"https://mydhl.express.dhl/us/en/home.html#/schedulePickupTab"};if(!i.hasOwnProperty(e))return null;return w.a.createElement(B,{onClick:function(){window.open(i[e],"_blank")},icon:"external"},t("Schedule a pickup"))}),n}return h()(t,e),a()(t,[{key:"renderCommercialInvoiceLink",value:function(){var e=this.props,t=e.translate,n=e.label.commercialInvoiceUrl;if(!n)return null;return w.a.createElement(B,{onClick:function(){window.open(n)},icon:"print"},t("Print customs form"))}},{key:"render",value:function(){var e=this.props,t=e.label,n=t.labelIndex,i=t.serviceName,o=t.packageName,r=t.productNames,a=t.receiptId,s=t.labelId,l=t.createdDate,c=t.refundableAmount,u=t.currency,d=t.showDetails,p=t.expiryDate,m=t.anonymized,h=t.usedDate,f=t.tracking,b=t.carrierId,v=t.commercialInvoiceUrl,g=e.siteId,y=e.orderId,k=e.translate,E=e.isModal,C=(new Date).getTime(),I=!1,R=!1;(m||h||p&&p<C)&&(I=!0);var O=(new Date).setDate((new Date).getDate()-30);return(m||h||l&&l<O)&&(R=!0),w.a.createElement("div",{className:"shipping-label__item"},w.a.createElement("p",{className:"shipping-label__item-detail"},k("%(service)s label (#%(labelIndex)d)",{args:{service:i,labelIndex:n+1}}),d&&w.a.createElement("span",null,!E&&w.a.createElement(z,{position:"bottom left"},this.renderLabelDetails(s),this.renderPickup(b),this.renderRefund(s,R,b,f),this.renderReprint(s,I),this.renderCommercialInvoiceLink(v)),w.a.createElement(ie,{siteId:g,orderId:y,labelIndex:n,serviceName:i,packageName:o,productNames:r,receiptId:a,labelId:s}),w.a.createElement(X,{siteId:g,orderId:y,createdDate:l,refundableAmount:c,currency:u,labelId:s}),w.a.createElement($,{siteId:g,orderId:y,labelId:s}))),d&&w.a.createElement("p",{className:"shipping-label__item-tracking"},k("Tracking #: {{trackingLink/}}",{components:{trackingLink:w.a.createElement(ae,{carrierId:b,tracking:f})}})))}}]),t}(E.Component);se.propTypes={siteId:k.a.number.isRequired,orderId:k.a.number.isRequired,label:k.a.shape({serviceName:k.a.string.isRequired,labelIndex:k.a.number.isRequired,packageName:k.a.string.isRequired,productNames:k.a.string.isRequired,receiptId:k.a.number.isRequired,labelId:k.a.number.isRequired,createdDate:k.a.string.isRequired,refundableAmount:k.a.number.isRequired,currency:k.a.string.isRequired,showDetails:k.a.bool.isRequired,expiryDate:k.a.string.isRequired,anonymized:k.a.bool.isRequired,usedDate:k.a.string.isRequired,tracking:k.a.string.isRequired,carrierId:k.a.string.isRequired,commercialInvoiceUrl:k.a.string}).isRequired,isModal:k.a.bool.isRequired,openRefundDialog:k.a.func.isRequired,openReprintDialog:k.a.func.isRequired,openDetailsDialog:k.a.func.isRequired};var le=Object(v.b)(null,function(e){return Object(D.b)({openRefundDialog:K.y,openReprintDialog:K.z,openDetailsDialog:K.u},e)})(Object(g.localize)(se)),ce=function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return h()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.translate,i=t.serviceName,o=t.labelIndex;return w.a.createElement("div",{className:"shipping-label__item"},w.a.createElement("p",{className:"shipping-label__item-detail"},n("%(service)s label (#%(labelIndex)d)",{args:{service:i,labelIndex:o+1}}),w.a.createElement("br",null),n("Purchasing\u2026")))}}]),t}(se);se.propTypes={label:k.a.object.isRequired};var ue=Object(g.localize)(ce),de=n(603),pe=function(e){function t(){var e,n,i;o()(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return i=l()(this,(e=u()(t)).call.apply(e,[this].concat(a))),b()(p()(i),"eventPropsByType",(n={},b()(n,I.a.INTERNAL_NOTE,function(e){return{icon:"aside",heading:(0,i.props.translate)("Internal note"),content:Object(de.a)(Object(de.b)(e.content))}}),b()(n,I.a.CUSTOMER_NOTE,function(e){return{icon:"mail",heading:(0,i.props.translate)("Note sent to customer"),content:Object(de.a)(Object(de.b)(e.content))}}),b()(n,I.a.LABEL_PURCHASING,function(e){return{icon:"sync",content:w.a.createElement(ue,{label:e,orderId:i.props.orderId,siteId:i.props.siteId})}}),b()(n,I.a.LABEL_PURCHASED,function(e){return{icon:"print",content:w.a.createElement(le,{label:e,orderId:i.props.orderId,siteId:i.props.siteId,isModal:i.props.isModal})}}),b()(n,I.a.LABEL_REFUND_REQUESTED,function(e){var t=i.props.translate;return{icon:"time",content:w.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refund requested (%(amount)s)",{args:{service:e.serviceName,labelNum:e.labelIndex+1,amount:_()(e.amount,e.currency)}}))}}),b()(n,I.a.LABEL_REFUND_COMPLETED,function(e){var t=i.props.translate;return{icon:"refund",content:w.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refunded (%(amount)s)",{args:{service:e.serviceName,labelNum:e.labelIndex+1,amount:_()(e.amount,e.currency)}}))}}),b()(n,I.a.LABEL_REFUND_REJECTED,function(e){var t=i.props.translate;return{icon:"cross-small",content:w.a.createElement("div",null,t("%(service)s label (#%(labelNum)d) refund rejected",{service:e.serviceName,args:{labelNum:e.labelIndex+1}}))}}),b()(n,I.a.REFUND_NOTE,function(e){var t=i.props.translate;return{icon:"credit-card",heading:t("Refund"),content:w.a.createElement("div",null,t("Refunded %(amount)s",{args:{amount:_()(e.amount,e.currency)}}),w.a.createElement("br",null),e.reason)}}),b()(n,void 0,function(){return{}}),n)),b()(p()(i),"renderDefaultEvent",function(e){return{icon:"aside",heading:(0,i.props.translate)("Note"),content:e.content}}),i}return h()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.moment,n=e.event,i=(this.eventPropsByType[n.type]||this.renderDefaultEvent)(n),o=i.icon,r=i.heading,a=i.content;return w.a.createElement("div",{className:"order-activity-log__note"},w.a.createElement("div",{className:"order-activity-log__note-meta"},w.a.createElement("span",{className:"order-activity-log__note-time"},t(n.timestamp).format("LT")),o&&w.a.createElement(O.a,{icon:o,size:24})),w.a.createElement("div",{className:"order-activity-log__note-body"},w.a.createElement("div",{className:"order-activity-log__note-type"},r),w.a.createElement("div",{className:"order-activity-log__note-content"},a)))}}]),t}(E.Component);b()(pe,"propTypes",{customer_note:k.a.bool,date_created_gmt:k.a.string,note:k.a.string.isRequired}),b()(pe,"propTypes",{event:k.a.object}),b()(pe,"defaultProps",{event:{}});var me=Object(g.localize)(pe),he=n(600),fe=function(e){function t(){var e,n;o()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(p()(n),"onClick",function(){n.props.onClick(n.props.date)}),n}return h()(t,e),a()(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.date,i=e.isOpen,o=e.moment,r=e.translate,a=o(n,"YYYYMMDD").format("ll"),s=w.a.createElement("div",null,w.a.createElement("h3",null,a),w.a.createElement("small",null,r("%(count)s event","%(count)s events",{count:t,args:{count:t}})));return w.a.createElement("div",{className:"order-activity-log__day"},w.a.createElement(he.a,{onClick:this.onClick,className:"order-activity-log__day-header",expanded:i,header:s,screenReaderText:r("Show notes from %(date)s",{args:{date:a}})},this.props.children))}}]),t}(E.Component);b()(fe,"propTypes",{count:k.a.number.isRequired,date:k.a.string.isRequired,isOpen:k.a.bool.isRequired,onClick:k.a.func.isRequired});var be=Object(g.localize)(fe);var ve=function(e){function t(){var e,n;o()(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),b()(p()(n),"toggleOpenDay",function(e){n.setState(function(){return{openDay:e}})}),b()(p()(n),"renderNotes",function(){var e=n.props,t=e.days,i=e.eventsByDay,o=e.translate;return t.length?w.a.createElement("div",null,t.map(function(e){var t=i[e];return w.a.createElement(be,{key:e,count:t.length,date:e,isOpen:e===n.state.openDay,onClick:n.toggleOpenDay},t.map(function(e){return w.a.createElement(me,{key:"".concat(e.type,"-").concat(e.key),event:e,orderId:n.props.orderId,siteId:n.props.siteId,isModal:n.props.isModal})}))})):w.a.createElement("p",null,o("No activity yet"))}),b()(p()(n),"renderPlaceholder",function(){return w.a.createElement("div",{className:"is-placeholder"},w.a.createElement(be,{count:0,date:"",isOpen:!0,index:1,onClick:C.noop},w.a.createElement(me,null)))}),n}return h()(t,e),a()(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({openDay:Object(C.last)(Object(C.keys)(this.props.eventsByDay))})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Object(C.last)(Object(C.keys)(e.eventsByDay));this.props.eventsByDay[t]||this.setState({openDay:t})}},{key:"render",value:function(){return this.props.isLoaded?this.renderNotes():this.renderPlaceholder()}}]),t}(E.Component);b()(ve,"propTypes",{orderId:k.a.number.isRequired,siteId:k.a.number.isRequired});t.a=Object(v.b)(function(e,t){var n=t.orderId||!1,i=Object(I.c)(e,n),o=Object(I.b)(e,n),r=o.length?function(e){var t={};return e.forEach(function(e){var n=Object(g.moment)(e.timestamp).format("YYYYMMDD");t[n]?t[n].push(e):t[n]=[e]}),Object(C.keys)(t).forEach(function(e){t[e]=Object(C.sortBy)(t[e],["timestamp","key"]).reverse()}),t}(o):{},a=r?Object(C.keys)(r):[];return a.sort().reverse(),{isLoaded:i,days:a,events:o,eventsByDay:r}})(Object(g.localize)(ve))},794:function(e,t,n){"use strict";n.r(t);var i=n(36),o=n.n(i),r=n(107),a=n.n(r),s=n(108),l=n.n(s),c=n(528),u=n.n(c),d=n(527),p=n.n(d),m=n(531),h=n.n(m),f=n(529),b=n.n(f),v=n(34),g=n.n(v),y=n(10),k=n.n(y),E=n(12),w=n.n(E),C=n(30),I=n(109),R=n(35),O=n(674),N=n(675),_=n(689),D=n(564),j=function(e){function t(){var e,n;a()(this,t);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(o))),g()(h()(n),"fetch",function(){var e=n.props,t=e.fetchLocations,i=e.loadingLocations,o=e.locationsLoaded,r=e.siteId;!i&&!o&&t(r)}),g()(h()(n),"componentDidMount",function(){n.fetch()}),g()(h()(n),"componentDidUpdate",function(){n.fetch()}),g()(h()(n),"render",function(){return null}),n}return b()(t,e),t}(y.Component);g()(j,"propTypes",{fetchLocations:w.a.func,siteId:w.a.number.isRequired,loadingLocations:w.a.bool.isRequired,locationsLoaded:w.a.bool.isRequired});var P=Object(I.b)(function(e){return{loadingLocations:Object(D.c)(e),locationsLoaded:Object(D.b)(e)}},function(e){return Object(C.b)({fetchLocations:_.a},e)})(j),L=n(540),x=n(537),S=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return b()(t,e),l()(t,[{key:"fetch",value:function(e){var t=e.orderId,n=e.siteId,i=e.loaded,o=e.fetching,r=e.error,a=e.refreshedLabelStatus;i||o||r?i&&!a&&this.props.fetchLabelsStatus(t,n):this.props.fetchLabelsData(t,n)}},{key:"UNSAFE_componentWillMount",value:function(){this.fetch(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fetch(e)}},{key:"render",value:function(){var e=this.props.siteId;return k.a.createElement("div",null,k.a.createElement(O.a,{siteId:e}),k.a.createElement(N.a,{siteId:e}),k.a.createElement(P,{siteId:e}))}}]),t}(y.Component);S.propTypes={siteId:w.a.number.isRequired,orderId:w.a.number.isRequired};var q=Object(I.b)(function(e,t){var n=t.orderId;return{loaded:Object(x.t)(e,n),fetching:Object(x.s)(e,n),error:Object(x.r)(e,n),refreshedLabelStatus:Object(x.m)(e,n)}},function(e){return Object(C.b)({fetchLabelsData:L.q,fetchLabelsStatus:L.r},e)})(S),T=n(630),M=n(589),A=n(532),z=n(683),U=n(616),F=n(608),V=n(638),B=function(e){function t(){var e,n;a()(this,t);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return n=u()(this,(e=p()(t)).call.apply(e,[this].concat(o))),g()(h()(n),"renderActivityLog",function(){var e=n.props,t=e.siteId,i=e.orderId,o=e.events,r=e.translate;return 0===o.length?r("No tracking information available at this time"):k.a.createElement("div",{className:"shipment-tracking__dummy-class order-activity-log"},k.a.createElement(z.a,{orderId:i,siteId:t}))}),n}return b()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.siteId,n=e.orderId,i=e.orderLoading,o=e.orderLoaded;t&&n&&!i&&!o&&this.props.fetchOrder(t,n)}},{key:"render",value:function(){var e=this.props,t=e.siteId,n=e.orderId;return k.a.createElement("div",{className:"shipment-tracking__container"},k.a.createElement(T.a,{notices:M.a.list}),k.a.createElement(q,{orderId:n,siteId:t,origin:"tracking"}),this.renderActivityLog())}}]),t}(y.Component);g()(B,"propTypes",{orderId:w.a.number.isRequired});t.default=Object(I.b)(function(e,t){var n=t.orderId,i=Object(A.a)(e);return{siteId:i,events:Object(U.b)(e,n),orderLoading:Object(F.c)(e,n,i),orderLoaded:Object(F.b)(e,n,i)}},function(e){return o()({},Object(C.b)({fetchOrder:V.e},e))})(Object(R.localize)(B))}}]);