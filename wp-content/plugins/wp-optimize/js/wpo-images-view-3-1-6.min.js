WP_Optimize_Images_View=function(e){function t(e,t,i){var a,o,n,_=e,c=!1;if(t)for(a=x(B).index(x("#"+e)),o=x(B).index(x("#"+t)),-1==a&&(a=o),-1==o&&(o=a),a<o?(n=x(B).eq(a).closest(Q),t=x(B).eq(o).attr("id")):(n=x(B).eq(o).closest(Q),t=x(B).eq(a).attr("id"));!c;)i?(n.addClass("selected"),x(B,n).prop("checked",i)):(n.removeClass("selected"),x(B,n).prop("checked",i)),x(B,n).attr("id")==t&&(c=!0),n=n.next();else i?x("#"+_).closest(Q).addClass("selected"):x("#"+_).closest(Q).removeClass("selected");s(0==r().length)}function s(e){j.action_buttons&&x.each(j.action_buttons,function(t,s){s.prop("disabled",e)})}function i(){if(j.hide_when_empty){var e=x([".",j.image_container_class,":visible"].join(""),P).length;0===e?(0==x(".wpo-images-view-empty",P).length&&P.append(x('<div class="wpo-images-view-empty wpo-fieldgroup" />').text(j.no_images_found_message)),x(".wpo-images-view-empty",P).show()):x(".wpo-images-view-empty",P).hide(),x.each(j.hide_when_empty,function(t,s){e>0?s.show():s.hide()})}}function a(){p()&&(i(),s(0==r().length))}function o(){P.scrollTop()+P.height()+100>P[0].scrollHeight&&"function"==typeof j.load_next_page_callback&&j.load_next_page_callback()}function n(e,t,s,i,a,o){var n,_="image_"+(65536*(1+Math.random())|0).toString(16).substring(1),c="";if(j.row_action_buttons)for(n in j.row_action_buttons)j.row_action_buttons.hasOwnProperty(n)&&(c+=['<button href="javascript: ;" class="',j.row_action_buttons[n]["class"]?j.row_action_buttons[n]["class"]:"",'"',' title="',j.row_action_buttons[n].hint?j.row_action_buttons[n].hint:"",'">',j.row_action_buttons[n].title?j.row_action_buttons[n].title:"","</button>"].join(""));O.hasOwnProperty(e)||(O[e]=0),O[e]++,P.append(['\t\t\t<div class="',j.image_container_class," ",j.image_container_custom_classes," ",j.image_container_blog_class_prefix,e,'">\t\t\t\t<a class="button ',j.view_image_btn_link_class,'" href="',s,'" target="_blank">',j.view_image_btn_text,"</a>",'<div class="',j.row_id_class,'">\t\t\t\t\t<input id="',_,'" type="checkbox" class="',j.checkbox_class,'" value="',t,'">\t\t\t\t</div>\t\t\t\t<div class="',j.row_thumb_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',i,'" title="',a,'" alt="',a,'">\t\t\t\t\t</a>\t\t\t\t</div>\t\t\t\t<div class="',j.row_file_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">',o,'</a>\t\t\t\t</div>\t\t\t\t<div class="',j.row_action_class,'">',c,'</div>\t\t\t\t<label for="',_,'" class="',j.label_class,'">\t\t\t\t\t<div class="thumbnail">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',i,'" title="',a,'" alt="',a,'">\t\t\t\t\t</div>\t\t\t\t</label>\t\t\t</div>'].join(""))}function _(e){x(Q,P).hide(),x([".",j.image_container_blog_class_prefix,e].join(""),P).show(),a()}function c(e){return O.hasOwnProperty(e)?O[e]:0}function l(e){e!==D&&(D=e,e===C.GRID&&P.removeClass(j.list_mode_class),e===C.LIST&&P.addClass(j.list_mode_class))}function r(){var e=[];return 0==x('input[type="checkbox"]',P).length?e:(x([".",j.image_container_class,":visible input:checked"].join(""),P).each(function(){e.push(x(this).val())}),e)}function d(){var e=[".",j.image_container_class].join("");x([e,":visible input:checked"].join(""),P).each(function(){x(this).closest(e).remove()})}function u(){P.show(),x(j.related_elements).each(function(){x(this).show()}),a(),o()}function h(){P.hide(),x(j.related_elements).each(function(){x(this).hide()})}function p(){return P.is(":visible")}function m(){P.css({"min-height":"220px"}),P.append(['<div class="wpo_shade">','<div class="wpo_shade_inner">','<span class="dashicons dashicons-update-alt wpo-rotate"></span>',"<h4>",wpoptimize.loading_data,"</h4>",'<p class="wpo-shade-progress-message"></p>',j.loader_additional_html,"</div>","</div>"].join("")),w()}function g(){P.css("min-height","initial"),x(".wpo_shade",P).remove()}function w(){x(".wpo_shade",P).css("top",P.scrollTop()+"px")}function f(e){x(".wpo-shade-progress-message",P).html(e)}function b(){x(".wpo_unused_image__input",P).prop("checked",!0).trigger("change")}function v(){x(".wpo_unused_image__input",P).prop("checked",!1).trigger("change")}function A(){x([".",j.image_container_class].join(""),P).remove(),O={},s(!0),"function"==typeof j.onclear&&j.onclear()}function k(){A(),o()}var x=jQuery,y={container:"",image_container_class:"wpo_unused_image",image_container_custom_classes:"wpo_unused_image_row",image_container_blog_class_prefix:"wpo_unused_image_site_",view_image_btn_link_class:"wpo_unused_image_view_link",view_image_btn_text:wpoptimize.view_image_link_text,row_selector:".wpo_unused_image_row",row_id_class:"wpo_unused_images_row_id",row_thumb_class:"wpo_unused_images_row_thumb",row_file_class:"wpo_unused_images_row_file",row_action_class:"wpo_unused_images_row_action",row_action_buttons:[],label_class:"wpo_unused_image_thumb_label",loader_additional_html:"",action_btn_text:"Remove",action_btn_class:"button button-primary wpo_unused_images_remove_single",checkbox_class:"wpo_unused_image__input",list_mode_class:"wpo_unused_image_list_view",no_images_found_message:"No images found",related_elements:[],action_buttons:[],hide_when_empty:[],load_next_page_callback:null,onclear:null},j=jQuery.extend({},y,e),C={GRID:"grid",LIST:"list"},D=C.GRID,P=j.container,Q="."+j.image_container_class,B="."+j.checkbox_class,I="",O={};P.on("scroll mousewheel",function(){o(),w()});var R=!1;return P.on("mousedown",j.row_selector,function(e){R=e.shiftKey||e.ctrlKey}),P.on("mouseup",j.row_selector,function(e){R=e.shiftKey||e.ctrlKey}),P.on("change","."+j.checkbox_class,function(e){!0===x(this).prop("checked")?x(this).closest(Q).addClass("selected"):x(this).closest(Q).removeClass("selected");var s=x(this).attr("id");""==I||0==x("#"+I).length||0==R?t(s,null,!0===x(this).prop("checked")):R?(t(I,s,!0===x(this).prop("checked")),I=""):t(s,null,!0===x(this).prop("checked")),I=s}),{show:u,hide:h,clear:A,reload:k,show_loader:m,hide_loader:g,loader_message:f,append_image:n,get_selected_images:r,remove_selected_images:d,get_images_count:c,load_next_page_if_need:o,filter_by_site:_,switch_view_mode:l,select_all:b,select_none:v,is_visible:p,update_view:a}};